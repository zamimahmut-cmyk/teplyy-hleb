<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—ë–ø–ª—ã–π —Ö–ª–µ–± - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∏–≥—Ä–∞</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lora:ital@0;1&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #050a18;
            --text-color: #ffffff;
            --accent-color: #a5f3fc;
            --transition-speed: 1.5s;
        }

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Lora', serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            overflow: hidden;
            transition: background-color var(--transition-speed) ease;
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç –∏–Ω–µ—è */
        #frost-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            box-shadow: inset 0 0 150px rgba(255, 255, 255, 0);
            z-index: 100;
            transition: box-shadow 0.5s ease;
        }

        #frost-overlay.active {
            box-shadow: inset 0 0 200px rgba(220, 240, 255, 0.8), inset 0 0 50px rgba(255, 255, 255, 0.5);
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            text-align: center;
            position: relative;
            z-index: 10;
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            margin-bottom: 20px;
            text-shadow: 0 0 15px rgba(165, 243, 252, 0.5);
        }

        /* –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—ã–π –∏ —É–ª—É—á—à–µ–Ω–Ω—ã–π —Ç–µ—Ä–º–æ–º–µ—Ç—Ä */
        .thermometer-container {
            position: fixed;
            top: 30px;
            left: 30px; /* –ü–µ—Ä–µ–Ω–µ—Å–ª–∏ –Ω–∞–ª–µ–≤–æ –¥–ª—è –ª—É—á—à–µ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏ */
            width: 80px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 40px;
            padding: 20px 10px;
            border: 2px solid var(--accent-color);
            backdrop-filter: blur(10px);
            box-shadow: 0 0 20px rgba(165, 243, 252, 0.2);
            z-index: 150;
        }

        .thermometer-bar {
            height: 250px; /* –£–≤–µ–ª–∏—á–∏–ª–∏ –≤—ã—Å–æ—Ç—É */
            width: 16px;
            background: #111;
            margin: 0 auto;
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.4);
        }

        #temp-fill {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 0%; 
            background: linear-gradient(to top, #3b82f6, #60a5fa, #fcd34d, #ef4444);
            transition: height 1s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        .temp-label {
            font-size: 0.8rem;
            margin-bottom: 12px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--accent-color);
        }

        #temp-value {
            font-size: 1.2rem;
            margin-top: 12px;
            font-weight: bold;
            color: #ffffff;
            text-shadow: 0 0 5px #000;
        }

        .scene {
            background: rgba(0, 0, 0, 0.5);
            padding: 35px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(12px);
            width: 100%;
            max-width: 700px;
            box-sizing: border-box;
            box-shadow: 0 15px 40px rgba(0,0,0,0.6);
            animation: fadeIn 0.8s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .quote {
            font-style: italic;
            font-size: 1.3rem;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #f1f5f9;
        }

        .options {
            display: grid;
            gap: 15px;
        }

        button {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 16px 24px;
            font-family: 'Lora', serif;
            font-size: 1.1rem;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.25s ease;
            text-align: center;
        }

        button:hover {
            background: rgba(255, 255, 255, 0.18);
            border-color: var(--accent-color);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(165, 243, 252, 0.2);
        }

        #message {
            margin-top: 20px;
            min-height: 28px;
            font-size: 1.2rem;
            font-weight: 600;
        }

        /* –ó–∞–º–µ—Ç–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –∞–≤—Ç–æ—Ä–∞ */
        footer {
            position: fixed;
            bottom: 25px;
            width: 100%;
            text-align: center;
            font-size: 1.6rem; /* –ï—â–µ –∫—Ä—É–ø–Ω–µ–µ */
            font-weight: 700;
            color: #ffffff;
            letter-spacing: 3px;
            font-family: 'Playfair Display', serif;
            z-index: 200;
            pointer-events: none;
            text-shadow: 3px 3px 15px rgba(0, 0, 0, 1), 0 0 25px rgba(165, 243, 252, 0.4);
            padding: 15px 0;
        }

        #final-screen {
            display: none;
            flex-direction: column;
            align-items: center;
        }

        .golden-bread {
            width: 180px;
            height: 180px;
            background: radial-gradient(circle, #fcd34d 0%, #d97706 70%);
            border-radius: 50% 50% 40% 40%;
            margin-bottom: 30px;
            box-shadow: 0 0 60px #f59e0b;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 4.5rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 30px #f59e0b; }
            50% { transform: scale(1.08); box-shadow: 0 0 70px #fbbf24; }
            100% { transform: scale(1); box-shadow: 0 0 30px #f59e0b; }
        }

        .snow {
            position: fixed;
            top: -10px;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            z-index: 1;
        }
    </style>
</head>
<body>

    <div id="frost-overlay"></div>
    
    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å —Å —Ç–µ—Ä–º–æ–º–µ—Ç—Ä–æ–º -->
    <div class="thermometer-container">
        <div class="temp-label">–ú–æ—Ä–æ–∑</div>
        <div class="thermometer-bar">
            <div id="temp-fill"></div>
        </div>
        <div id="temp-value">-50¬∞C</div>
    </div>

    <div class="container">
        <div id="game-ui" class="scene">
            <h1 id="scene-title">–¢—ë–ø–ª—ã–π —Ö–ª–µ–±</h1>
            <div id="quote-text" class="quote">
                –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏...
            </div>
            <div id="options-container" class="options"></div>
            <div id="message"></div>
        </div>

        <div id="final-screen" class="scene">
            <div class="golden-bread">üçû</div>
            <h1 style="color: #fcd34d; font-size: 2.5rem;">–¢–≤–æ—ë —Å–µ—Ä–¥—Ü–µ –æ—Ç—Ç–∞—è–ª–æ!</h1>
            <p class="quote">–í –ë–µ—Ä–µ–∂–∫–∏ –ø—Ä–∏—à–ª–∞ –≤–µ—Å–Ω–∞. –ü—Ç–∏—Ü—ã –∑–∞–ø–µ–ª–∏, –ª—ë–¥ –Ω–∞ —Ä–µ–∫–µ —Ç—Ä–µ—Å–Ω—É–ª, –∞ –∑–∞–ø–∞—Ö —Å–≤–µ–∂–µ–≥–æ —Ç—ë–ø–ª–æ–≥–æ —Ö–ª–µ–±–∞ –Ω–∞–ø–æ–ª–Ω–∏–ª –≤—Å—é –¥–µ—Ä–µ–≤–Ω—é. –¢—Ä—É–¥ –∏ –¥–æ–±—Ä–æ—Ç–∞ –ø–æ–±–µ–¥–∏–ª–∏ –ª—é—Ç—ã–π —Ö–æ–ª–æ–¥.</p>
            <button onclick="location.reload()" style="background: #d97706; border: none; font-weight: bold;">–ù–∞—á–∞—Ç—å —Å–Ω–∞—á–∞–ª–∞</button>
        </div>
    </div>

    <footer>–ê–≤—Ç–æ—Ä: –ó–∞–º–∑–∞–≥—É–ª—å –ú–∞—Ö–º—É—Ç–æ–≤–Ω–∞</footer>

    <script>
        // --- –ó–≤—É–∫–æ–≤–æ–π –¥–≤–∏–∂–æ–∫ ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        let musicStarted = false;
        let ambientMusic = null;

        function startBackgroundMusic() {
            if (musicStarted) return;
            musicStarted = true;

            const masterGain = audioCtx.createGain();
            masterGain.connect(audioCtx.destination);
            masterGain.gain.setValueAtTime(0, audioCtx.currentTime);
            masterGain.gain.linearRampToValueAtTime(0.15, audioCtx.currentTime + 2);

            const notes = [261.63, 329.63, 392.00, 523.25, 659.25];
            
            function playSparkle() {
                if (currentLevel >= scenes.length) return;
                
                const osc = audioCtx.createOscillator();
                const g = audioCtx.createGain();
                osc.type = 'sine';
                
                const freq = notes[Math.floor(Math.random() * notes.length)];
                osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
                
                osc.connect(g);
                g.connect(masterGain);
                
                const now = audioCtx.currentTime;
                g.gain.setValueAtTime(0, now);
                g.gain.linearRampToValueAtTime(0.04, now + 1);
                g.gain.linearRampToValueAtTime(0, now + 4);
                
                osc.start(now);
                osc.stop(now + 4);
                
                setTimeout(playSparkle, Math.random() * 2000 + 1000);
            }

            const drone = audioCtx.createOscillator();
            const droneGain = audioCtx.createGain();
            drone.type = 'triangle';
            drone.frequency.setValueAtTime(65.41, audioCtx.currentTime); 
            drone.connect(droneGain);
            droneGain.connect(masterGain);
            droneGain.gain.setValueAtTime(0.03, audioCtx.currentTime);
            drone.start();

            playSparkle();
            ambientMusic = { masterGain, drone };
        }

        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            if (!musicStarted) startBackgroundMusic();
            
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            const now = audioCtx.currentTime;

            if (type === 'correct') {
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(523.25, now);
                oscillator.frequency.exponentialRampToValueAtTime(659.25, now + 0.1);
                oscillator.frequency.exponentialRampToValueAtTime(783.99, now + 0.2);
                gainNode.gain.setValueAtTime(0.3, now);
                gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.5);
                oscillator.start(now);
                oscillator.stop(now + 0.5);
            } else {
                oscillator.type = 'sawtooth';
                oscillator.frequency.setValueAtTime(110, now);
                oscillator.frequency.linearRampToValueAtTime(70, now + 0.4); 
                gainNode.gain.setValueAtTime(0.2, now);
                gainNode.gain.linearRampToValueAtTime(0.01, now + 0.4);
                oscillator.start(now);
                oscillator.stop(now + 0.4);
            }
        }

        const scenes = [
            {
                title: "–£—Ä–æ–≤–µ–Ω—å 1: –ü–æ—Å—Ç—É–ø–æ–∫",
                text: "–†–∞–Ω–µ–Ω—ã–π –∫–æ–Ω—å –ø–æ–¥–æ—à—ë–ª –∫ –§–∏–ª—å–∫–µ, –Ω–∞–¥–µ—è—Å—å –Ω–∞ —É–≥–æ—â–µ–Ω–∏–µ. –§–∏–ª—å–∫–∞ –∂–µ–≤–∞–ª –∫—É—Å–æ–∫ —Ö–ª–µ–±–∞ —Å —Å–æ–ª—å—é. –ß—Ç–æ —Å–¥–µ–ª–∞–ª –º–∞–ª—å—á–∏–∫, –∫–æ–≥–¥–∞ –∫–æ–Ω—å –ø–æ—Ç—è–Ω—É–ª—Å—è –∫ –Ω–µ–º—É?",
                options: [
                    { text: "–ü–æ–≥–ª–∞–¥–∏–ª –ø–æ –≥—Ä–∏–≤–µ", correct: false },
                    { text: "–£–¥–∞—Ä–∏–ª –ø–æ –≥—É–±–∞–º –∏ –∫—Ä–∏–∫–Ω—É–ª: ¬´–î–∞ –Ω—É —Ç–µ–±—è! –î—å—è–≤–æ–ª!¬ª", correct: true },
                    { text: "–û—Ç–¥–∞–ª –≤–µ—Å—å –∫—É—Å–æ–∫ —Ö–ª–µ–±–∞", correct: false }
                ]
            },
            {
                title: "–£—Ä–æ–≤–µ–Ω—å 2: –ù–∞—á–∞–ª–æ —Å—Ç—É–∂–∏",
                text: "–°—Ä–∞–∑—É –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤ –ë–µ—Ä–µ–∂–∫–∞—Ö –Ω–∞—á–∞–ª–æ—Å—å –Ω–µ—á—Ç–æ —Å—Ç—Ä–∞–Ω–Ω–æ–µ. –í–µ—Ç–µ—Ä –∑–∞–≤—ã–ª, –Ω–µ–±–æ –ø–æ—Ç–µ–º–Ω–µ–ª–æ. –ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å —Å –¥–µ—Ä–µ–≤–Ω–µ–π?",
                options: [
                    { text: "–ù–∞—á–∞–ª—Å—è —Å–∏–ª—å–Ω—ã–π –ª–∏–≤–µ–Ω—å", correct: false },
                    { text: "–£–ø–∞–ª –≥—É—Å—Ç–æ–π —Ç—É–º–∞–Ω", correct: false },
                    { text: "–ù–∞–ª–µ—Ç–µ–ª –ª—é—Ç—ã–π –º–æ—Ä–æ–∑ –∏ –∑–∞–º–µ—Ä–∑–ª–∞ —Ä–µ–∫–∞", correct: true }
                ]
            },
            {
                title: "–£—Ä–æ–≤–µ–Ω—å 3: –°—Ç–∞—Ä–∞—è –ª–µ–≥–µ–Ω–¥–∞",
                text: "–ë–∞–±–∫–∞ —Ä–∞—Å—Å–∫–∞–∑–∞–ª–∞ –§–∏–ª—å–∫–µ –æ —Å–ª—É—á–∞–µ —Å—Ç–æ–ª–µ—Ç–Ω–µ–π –¥–∞–≤–Ω–æ—Å—Ç–∏, –∫–æ–≥–¥–∞ –æ–¥–∏–Ω –º—É–∂–∏–∫ –æ–±–∏–¥–µ–ª —Å—Ç–∞—Ä–æ–≥–æ —Å–æ–ª–¥–∞—Ç–∞. –û—Ç —á–µ–≥–æ —Ç–æ–≥–¥–∞, –ø–æ —Å–ª–æ–≤–∞–º –±–∞–±–∫–∏, –Ω–∞—Å—Ç—É–ø–∏–ª —Ö–æ–ª–æ–¥?",
                options: [
                    { text: "–û—Ç ¬´–∑–ª–æ–±—ã –ª—é–¥—Å–∫–æ–π¬ª", correct: true },
                    { text: "–û—Ç —Å–µ–≤–µ—Ä–Ω–æ–≥–æ —Å–∏—è–Ω–∏—è", correct: false },
                    { text: "–û—Ç –∫–æ–ª–¥–æ–≤—Å—Ç–≤–∞ –º–µ–ª—å–Ω–∏–∫–∞", correct: false }
                ]
            },
            {
                title: "–£—Ä–æ–≤–µ–Ω—å 4: –ü—É—Ç—å –∫ —Å–ø–∞—Å–µ–Ω–∏—é",
                text: "–§–∏–ª—å–∫–∞ –ø–æ–Ω—è–ª, —á—Ç–æ –Ω–∞—Ç–≤–æ—Ä–∏–ª –±–µ–¥—É. –ù–æ—á—å—é, –ø—Ä–µ–≤–æ–∑–º–æ–≥–∞—è —Å—Ç—Ä–∞—Ö –∏ –ª–µ–¥—è–Ω–æ–π –≤–µ—Ç–µ—Ä, –æ–Ω —Ä–µ—à–∏–ª –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å. –ö—É–¥–∞ –æ–Ω –æ—Ç–ø—Ä–∞–≤–∏–ª—Å—è?",
                options: [
                    { text: "–ö –º–µ–ª—å–Ω–∏–∫—É –ü–∞–Ω–∫—Ä–∞—Ç—É –Ω–∞ –º–µ–ª—å–Ω–∏—Ü—É", correct: true },
                    { text: "–í –≥–æ—Ä–æ–¥ –∑–∞ –¥—Ä–æ–≤–∞–º–∏", correct: false },
                    { text: "–°–ø—Ä—è—Ç–∞–ª—Å—è –Ω–∞ –ø–µ—á–∫–µ", correct: false }
                ]
            },
            {
                title: "–£—Ä–æ–≤–µ–Ω—å 5: –ú–µ–ª—å–Ω–∏–∫ –ü–∞–Ω–∫—Ä–∞—Ç",
                text: "–ü–∞–Ω–∫—Ä–∞—Ç —Å—á–∏—Ç–∞–ª—Å—è –≤ –¥–µ—Ä–µ–≤–Ω–µ –∫–æ–ª–¥—É–Ω–æ–º, –Ω–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –±—ã–ª –º—É–¥—Ä—ã–º —Å—Ç–∞—Ä–∏–∫–æ–º. –ß—Ç–æ –æ–Ω —Å–∫–∞–∑–∞–ª –§–∏–ª—å–∫–µ –ø—Ä–æ –µ–≥–æ –ø–æ—Å—Ç—É–ø–æ–∫?",
                options: [
                    { text: "¬´–ù–∏—á–µ–≥–æ, —Å–∞–º–æ –ø—Ä–æ–π–¥–µ—Ç¬ª", correct: false },
                    { text: "¬´–¢–≤–æ–µ –¥–µ–ª–æ ‚Äî –ø–æ–ø—Ä–∞–≤–∏—Ç—å –±–µ–¥—É¬ª", correct: true },
                    { text: "¬´–¢—ã –±–æ–ª—å—à–µ –Ω–µ –≤–µ—Ä–Ω–µ—à—å—Å—è –¥–æ–º–æ–π¬ª", correct: false }
                ]
            },
            {
                title: "–£—Ä–æ–≤–µ–Ω—å 6: –ü–ª–∞–Ω —Å–ø–∞—Å–µ–Ω–∏—è",
                text: "–ú–æ—Ä–æ–∑ —Å–∫–æ–≤–∞–ª –º–µ–ª—å–Ω–∏—á–Ω–æ–µ –∫–æ–ª–µ—Å–æ, –∏ —Ö–ª–µ–±–∞ –≤ –¥–µ—Ä–µ–≤–Ω–µ –±–æ–ª—å—à–µ –Ω–µ –±—ã–ª–æ. –ß—Ç–æ –ø—Ä–µ–¥–ª–æ–∂–∏–ª –§–∏–ª—å–∫–∞, —á—Ç–æ–±—ã –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –≤–æ–¥—É –∏–∑-–ø–æ–¥–æ –ª—å–¥–∞?",
                options: [
                    { text: "–ñ–¥–∞—Ç—å –ø–æ–º–æ—â–∏ –æ—Ç —Å–æ–ª–¥–∞—Ç", correct: false },
                    { text: "–°–æ–±—Ä–∞—Ç—å —Ä–µ–±—è—Ç –∏ —Ä—É–±–∏—Ç—å –ª—ë–¥ —É –ª–æ—Ç–∫–æ–≤", correct: true },
                    { text: "–†–∞—Å—Ç–æ–ø–∏—Ç—å –ª—ë–¥ –∫–∏–ø—è—Ç–∫–æ–º", correct: false }
                ]
            },
            {
                title: "–£—Ä–æ–≤–µ–Ω—å 7: –°–æ—Ä–∞—Ç–Ω–∏–∫–∏",
                text: "–ö—Ç–æ –ø—Ä–∏—à—ë–ª –Ω–∞ –ø–æ–º–æ—â—å –§–∏–ª—å–∫–µ –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–µ —É—Ç—Ä–æ, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Å—Ç—Ä–∞—à–Ω—ã–π –º–æ—Ä–æ–∑?",
                options: [
                    { text: "–ù–∏–∫—Ç–æ, –æ–Ω —Ä–∞–±–æ—Ç–∞–ª –æ–¥–∏–Ω", correct: false },
                    { text: "–í—Å–µ —Ä–µ–±—è—Ç–∞ –∏ —Å—Ç–∞—Ä–∏–∫–∏ –¥–µ—Ä–µ–≤–Ω–∏", correct: true },
                    { text: "–¢–æ–ª—å–∫–æ –µ–≥–æ –±–∞–±—É—à–∫–∞", correct: false }
                ]
            },
            {
                title: "–£—Ä–æ–≤–µ–Ω—å 8: –ß—É–¥–æ –ø—Ä–∏—Ä–æ–¥—ã",
                text: "–ü–æ–∫–∞ –ª—é–¥–∏ —Ä–∞–±–æ—Ç–∞–ª–∏ –ª–æ–º–∞–º–∏ –∏ —Ç–æ–ø–æ—Ä–∞–º–∏, –ø—Ä–æ–∏–∑–æ—à–ª–æ —á—É–¥–æ ‚Äî –≤–µ—Ç–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–∏–ª—Å—è. –ö–∞–∫–æ–π –≤–µ—Ç–µ—Ä –ø—Ä–∏–Ω—ë—Å –¥–æ–ª–≥–æ–∂–¥–∞–Ω–Ω—É—é –æ—Ç—Ç–µ–ø–µ–ª—å?",
                options: [
                    { text: "–°–µ–≤–µ—Ä–Ω—ã–π", correct: false },
                    { text: "–í–æ—Å—Ç–æ—á–Ω—ã–π", correct: false },
                    { text: "–¢—ë–ø–ª—ã–π –ª–µ—Ç–Ω–∏–π –≤–µ—Ç–µ—Ä (–Æ–∂–Ω—ã–π)", correct: true }
                ]
            },
            {
                title: "–£—Ä–æ–≤–µ–Ω—å 9: –ò—Å–∫—É–ø–ª–µ–Ω–∏–µ",
                text: "–í–æ–¥–∞ –ø–æ—à–ª–∞, –º–µ–ª—å–Ω–∏—Ü–∞ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∞, –∏ –ü–∞–Ω–∫—Ä–∞—Ç –∏—Å–ø–µ–∫ –ø–µ—Ä–≤—ã–π —Ö–ª–µ–±. –ß—Ç–æ —Å–¥–µ–ª–∞–ª –§–∏–ª—å–∫–∞, —á—Ç–æ–±—ã –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ –ø–æ–º–∏—Ä–∏—Ç—å—Å—è —Å –∫–æ–Ω–µ–º?",
                options: [
                    { text: "–ü—Ä–∏–Ω–µ—Å –µ–º—É –±—É—Ö–∞–Ω–∫—É —Å–≤–µ–∂–µ–≥–æ —Ç–µ–ø–ª–æ–≥–æ —Ö–ª–µ–±–∞ —Å —Å–æ–ª—å—é", correct: true },
                    { text: "–ü—Ä–æ—Å—Ç–æ –ø–æ—Å—Ç–æ—è–ª —Ä—è–¥–æ–º", correct: false },
                    { text: "–ü–æ–ø—Ä–æ—Å–∏–ª –ü–∞–Ω–∫—Ä–∞—Ç–∞ –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å —Å –∫–æ–Ω–µ–º", correct: false }
                ]
            },
            {
                title: "–£—Ä–æ–≤–µ–Ω—å 10: –§–∏–Ω–∞–ª",
                text: "–ö–æ–Ω—å —Å–Ω–∞—á–∞–ª–∞ –±–æ—è–ª—Å—è –±—Ä–∞—Ç—å —Ö–ª–µ–± –∏–∑ —Ä—É–∫ –º–∞–ª—å—á–∏–∫–∞. –ö–∞–∫ –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å —ç—Ç–∞ –∏—Å—Ç–æ—Ä–∏—è?",
                options: [
                    { text: "–ö–æ–Ω—å —É–±–µ–∂–∞–ª –≤ –ª–µ—Å", correct: false },
                    { text: "–ö–æ–Ω—å –≤–∑—è–ª —Ö–ª–µ–±, –ø–æ–ª–æ–∂–∏–ª –≥–æ–ª–æ–≤—É –Ω–∞ –ø–ª–µ—á–æ –§–∏–ª—å–∫–µ –∏ –∑–∞—Ä–∂–∞–ª", correct: true },
                    { text: "–•–ª–µ–± –æ—Å—Ç–∞–ª—Å—è –ª–µ–∂–∞—Ç—å –Ω–∞ —Å–Ω–µ–≥—É", correct: false }
                ]
            }
        ];

        let currentLevel = 0;
        let temperature = -50;
        const startTemp = -50;
        const targetTemp = 10;

        const tempFill = document.getElementById('temp-fill');
        const tempValue = document.getElementById('temp-value');
        const quoteText = document.getElementById('quote-text');
        const titleText = document.getElementById('scene-title');
        const optionsContainer = document.getElementById('options-container');
        const message = document.getElementById('message');
        const frostOverlay = document.getElementById('frost-overlay');
        const gameUI = document.getElementById('game-ui');
        const finalScreen = document.getElementById('final-screen');

        function updateUI() {
            const percentage = ((temperature - startTemp) / (targetTemp - startTemp)) * 100;
            tempFill.style.height = `${Math.max(0, Math.min(100, percentage))}%`;
            tempValue.innerText = `${temperature}¬∞C`;

            if (temperature <= 0) {
                const shift = (temperature + 50) * 3; 
                document.body.style.backgroundColor = `rgb(${5 + shift/15}, ${10 + shift/8}, ${24 + shift/4})`;
            } else {
                document.body.style.backgroundColor = "#2d4a3e"; 
            }
        }

        function loadScene() {
            if (currentLevel >= scenes.length) {
                showFinal();
                return;
            }

            const scene = scenes[currentLevel];
            titleText.innerText = scene.title;
            quoteText.innerText = scene.text;
            optionsContainer.innerHTML = '';
            message.innerText = '';

            scene.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.innerText = opt.text;
                btn.onclick = () => handleAnswer(opt.correct);
                optionsContainer.appendChild(btn);
            });
            
            gameUI.style.animation = 'none';
            void gameUI.offsetWidth; 
            gameUI.style.animation = 'fadeIn 0.8s ease';
        }

        function handleAnswer(isCorrect) {
            if (isCorrect) {
                playSound('correct');
                temperature += 6;
                if (temperature > 10) temperature = 10;
                
                message.style.color = "#a5f3fc";
                message.innerText = "–°–µ—Ä–¥—Ü–µ –æ—Ç—Ç–∞–∏–≤–∞–µ—Ç... –ú–æ—Ä–æ–∑ –æ—Ç—Å—Ç—É–ø–∞–µ—Ç!";
                frostOverlay.classList.remove('active');
                
                setTimeout(() => {
                    currentLevel++;
                    updateUI();
                    loadScene();
                }, 1200);

            } else {
                playSound('wrong');
                temperature -= 5;
                if (temperature < -70) temperature = -70; 
                
                message.style.color = "#fca5a5";
                message.innerText = "–°–ª–∏—à–∫–æ–º —Ö–æ–ª–æ–¥–Ω–æ... –ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑!";
                frostOverlay.classList.add('active');
                setTimeout(() => {
                    frostOverlay.classList.remove('active');
                }, 800);
                updateUI();
            }
        }

        function showFinal() {
            temperature = 10;
            updateUI();
            gameUI.style.display = 'none';
            finalScreen.style.display = 'flex';
            
            if (ambientMusic) {
                ambientMusic.masterGain.gain.exponentialRampToValueAtTime(0.3, audioCtx.currentTime + 1);
                ambientMusic.drone.frequency.exponentialRampToValueAtTime(130.81, audioCtx.currentTime + 3); 
            }
            
            createSpringParticles();
        }

        function createSnowflake() {
            if (temperature >= 10) return;
            const snow = document.createElement('div');
            snow.className = 'snow';
            snow.style.left = Math.random() * window.innerWidth + 'px';
            snow.style.opacity = Math.random();
            const size = (Math.random() * 4 + 2) + 'px';
            snow.style.width = size;
            snow.style.height = size;
            
            const duration = Math.random() * 3 + 4;
            snow.animate([
                { transform: 'translateY(0vh) translateX(0px)' },
                { transform: `translateY(105vh) translateX(${Math.random() * 60 - 30}px)` }
            ], {
                duration: duration * 1000,
                easing: 'linear'
            });

            document.body.appendChild(snow);
            setTimeout(() => snow.remove(), duration * 1000);
        }

        function createSpringParticles() {
            setInterval(() => {
                const petal = document.createElement('div');
                petal.style.position = 'fixed';
                petal.style.bottom = '-10px';
                petal.style.left = Math.random() * 100 + 'vw';
                petal.style.width = '10px';
                petal.style.height = '10px';
                petal.style.backgroundColor = '#fbbf24';
                petal.style.borderRadius = '50%';
                petal.style.zIndex = '1';
                document.body.appendChild(petal);

                petal.animate([
                    { transform: 'translateY(0) scale(1)', opacity: 1 },
                    { transform: `translateY(-100vh) translateX(${Math.random() * 100 - 50}px) scale(0)`, opacity: 0 }
                ], {
                    duration: 4000,
                    easing: 'ease-out'
                });
                setTimeout(() => petal.remove(), 4000);
            }, 120);
        }

        setInterval(createSnowflake, 200);
        updateUI();
        loadScene();
    </script>
</body>
</html>